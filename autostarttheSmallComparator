#!/bin/bash
# Script to enable/disable auto-start for theSmallComparator

SERVICE_NAME="theSmallComparator.service"

# Colors
GREEN='\033[0;32m'
RED='\033[0;31m'
YELLOW='\033[1;33m'
NC='\033[0m'

if [ "$1" == "enable" ] || [ "$1" == "on" ]; then
    echo "Enabling $SERVICE_NAME..."
    if command -v sudo &> /dev/null; then
        sudo systemctl enable $SERVICE_NAME
        sudo systemctl start $SERVICE_NAME
    else
        systemctl enable $SERVICE_NAME
        systemctl start $SERVICE_NAME
    fi
    
    if systemctl is-active --quiet $SERVICE_NAME; then
        echo -e "${GREEN}Auto-start ENABLED and service started.${NC}"
    else
        echo -e "${RED}Failed to start service.${NC}"
    fi

elif [ "$1" == "disable" ] || [ "$1" == "off" ]; then
    echo "Disabling $SERVICE_NAME..."
    if command -v sudo &> /dev/null; then
        sudo systemctl stop $SERVICE_NAME
        sudo systemctl disable $SERVICE_NAME
    else
        systemctl stop $SERVICE_NAME
        systemctl disable $SERVICE_NAME
    fi
    
    echo -e "${YELLOW}Auto-start DISABLED and service stopped.${NC}"

elif [ "$1" == "status" ]; then
    systemctl status $SERVICE_NAME

else
    echo "Usage: ./autostarttheSmallComparator [enable|disable|status]"
    echo "  enable  - Enable auto-start on boot"
    echo "  disable - Disable auto-start on boot"
    echo "  status  - Check current service status"
fi